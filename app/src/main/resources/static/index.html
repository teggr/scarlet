<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Scarlet Portal</title>
<style>
body{font:14px Monaco,monospace;background:#1a1625;color:#c9d1d9;margin:0;padding:20px}
h1{color:#ff6b9d;border-bottom:2px solid #ff6b9d;padding-bottom:10px}
.nav{margin:15px 0;padding:10px 0;border-bottom:1px solid #3f3755}
.nav a{color:#4ecdc4;text-decoration:none;margin-right:20px}
.nav a:hover{color:#ff6b9d}
.stats{background:#252033;padding:12px;margin:15px 0;border-radius:4px}
.form{background:#252033;padding:18px;margin:15px 0;border-radius:4px}
input,textarea{width:98%;background:#1a1625;color:#c9d1d9;border:1px solid #3f3755;padding:8px;margin:6px 0;font-family:inherit}
button{background:#ff6b9d;color:#fff;border:none;padding:10px 18px;cursor:pointer;margin-top:8px;border-radius:3px}
button:hover{background:#e5568a}
.list{margin-top:20px}
.card{background:#252033;padding:14px;margin:12px 0;border-left:3px solid #3f3755;border-radius:3px}
.card.in{border-left-color:#4ecdc4}
.card.out{border-left-color:#ff6b9d}
.card .top{font-size:11px;color:#7d8590;margin-bottom:8px}
.card .msg{margin:8px 0;line-height:1.5}
.card .bot{font-size:10px;color:#545d68;margin-top:8px;padding-top:8px;border-top:1px solid #3f3755}
</style>
</head>
<body>
<h1>SCARLET PORTAL</h1>
<div class="nav">
  <a href="/">Home</a>
  <a href="/conversations.html">Conversations</a>
</div>
<div class="stats">Archived items: <strong id="count">0</strong></div>
<div class="form">
<div>Target Node:</div>
<input id="node" type="text" placeholder="Enter destination">
<div>Message:</div>
<textarea id="msg" rows="3" placeholder="Enter content"></textarea>
<button onclick="send()">Transmit</button>
</div>
<button onclick="load()" style="background:#4ecdc4;color:#1a1625">Reload</button>
<div class="list" id="list"></div>
<script>
function load(){
fetch('/aperture/utterances').then(r=>r.json()).then(d=>{let h='';d.forEach(i=>{let c=i.trajectory==='INBOUND'?'in':'out';h+=`<div class="card ${c}"><div class="top">${esc(i.originatorTag)} [${i.trajectory}]</div><div class="msg">${esc(i.inscription)}</div><div class="bot">token:${esc(i.ephemeralToken)} | thread:${esc(i.conversationThread)}</div></div>`;});document.getElementById('list').innerHTML=h||'<div class="card">No data</div>';});
fetch('/aperture/statistics').then(r=>r.json()).then(d=>{document.getElementById('count').textContent=d.totalArchivedVolume;});
}
function send(){
let n=document.getElementById('node').value;
let m=document.getElementById('msg').value;
if(n&&m){
fetch('/aperture/transmit',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({destinationNode:n,payloadContent:m})}).then(()=>{document.getElementById('node').value='';document.getElementById('msg').value='';load();});
}
}
function esc(s){let e=document.createElement('div');e.textContent=s;return e.innerHTML}
load();
setInterval(load,10000);
</script>
</body>
</html>
